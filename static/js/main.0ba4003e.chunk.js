(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},109:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(19),r=a.n(o),c=(a(102),a(103),a(8)),s=a(1),l=a(2),g=a(4),u=a(3),d=a(5),h=a(20),m=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("nav",null,i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(c.b,{to:"/"},"Home")),i.a.createElement("li",null,i.a.createElement(c.b,{to:"/about"},"About")),i.a.createElement("li",null,i.a.createElement(c.b,{to:"/list"},"list")),i.a.createElement("li",null,i.a.createElement(c.b,{to:"/sidebar_demo"},"sidebarDemo")),i.a.createElement("li",null,i.a.createElement(c.b,{to:"/data_set"},"\u6570\u676e\u6807\u6ce8demo")),i.a.createElement("li",null,i.a.createElement(c.b,{to:"/antv_demo"},"antv_demo")),i.a.createElement("li",null,i.a.createElement(c.b,{to:"/polygon_line_point"},"\u70b9\u7ebf\u6846\u63d2\u4ef6\u6f14\u793a")))))}}]),t}(i.a.PureComponent),p=a(70),f=a(43),v=a.n(f),y=function(){function e(t){Object(s.a)(this,e),this.config={containerId:"canvasDraw",w:760,h:400,img:"https://static2.extremevision.com.cn/images/lion/case/case_bg1_0307.png?201906131041)",drawType:"polygon",lineWidth:4,data:[],pointRadius:4,pointFillColor:"yellow",lineFillColor:"red",polygonFillColor:"blue",drawData:[],isCanDraw:!0,mouseMoveHasClick:!1,curData:[],imgOnLoadCb:function(e){}},this.canvas=null,this.config=this.merge(this.config,t),this.init()}return Object(l.a)(e,[{key:"init",value:function(){this.renderUI(),this.loadStyle()}},{key:"renderUI",value:function(){var e=this;this.config.rootEl=document.getElementById(this.config.containerId);var t=document.querySelector(".bg_img");t||((t=document.createElement("img")).src=this.config.img,this.config.rootEl.appendChild(t)),t.onload=function(a){for(var n=a.target,i=function(e,t,a,n){var i=e/t,o=0,r=0;return i>a/n?r=(o=a)*(t/e):o=(r=n)*i,{w:o,h:r,left:parseInt((a-o)/2),top:parseInt((n-r)/2)}}(n.width,n.height,e.config.w,e.config.h),o=i.w,r=i.h,c=i.left,s={width:o+"px",height:r+"px",position:"absolute",top:i.top+"px",left:c+"px","z-index":5},l=Object.keys(s),g=l.length,u=0;u<g;u++){var d=l[u];t.style[d]=s[d]}e.ininCanvas(o,r),e.bindEvt(),e.config.imgOnLoadCb(!0)},t.onError=function(){console.log("\u56fe\u7247\u52a0\u8f7d\u5931\u8d25\uff01"),e.config.imgOnLoadCb(!1)}}},{key:"loadStyle",value:function(){var e=document.querySelector(".canvas_draw_style");e||((e=document.createElement("style")).className="canvas_draw_style");var t="\n      #".concat(this.config.containerId," {\n        position: relative;\n      }\n\n      #").concat(this.config.containerId," canvas {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        z-index: 10;\n      }\n    ");e.innerHTML=t;var a=document.querySelector("head");console.log("head",a),a.appendChild(e)}},{key:"ininCanvas",value:function(e,t){var a=this.config.containerId,n=this.config.data;this.config.drawData=function e(t,a){if(!t&&"object"!==typeof t)throw new Error("error arguments","shallowClone");for(var n in a=a||(t.constructor===Array?[]:{}),t)t.hasOwnProperty(n)&&(t[n]&&"object"===typeof t[n]?(a[n]=t[n].constructor===Array?[]:{},e(t[n],a[n])):a[n]=t[n]);return a}(n),this.canvas=new v.a.Canvas({containerId:a,width:e,height:t}),console.log("ininCanvas",this.canvas),this.initPolygon()}},{key:"initPolygon",value:function(){for(var e=this.config.drawData,t=e.length,a=0;a<t;a++){var n=e[a],i=n.type,o=n.data;o.length&&this.drawPolygon(i,o)}}},{key:"drawPolygon",value:function(e,t){switch(e){case"point":this.addPoint(t[0],t[1]);break;case"line":this.drawMutipleLine(t);break;case"polygon":this.addPolygon(t)}}},{key:"merge",value:function(e,t){if("object"===typeof t)return Object.keys(t).forEach(function(a){e[a]=t[a]}),e}},{key:"drawBgImg",value:function(){var e=this.config.w,t=this.config.h,a=this.config.img;this.canvas.addShape("image",{attrs:{x:0,y:0,width:e,height:t,img:a}})}},{key:"drawMutipleLine",value:function(e){var t=this;e.length;e.forEach(function(e){var a=e.x1,n=e.y1,i=e.x2,o=e.y2;t.addLine(a,n,i,o)})}},{key:"addPoint",value:function(e,t){var a=this.config.pointFillColor,n=this.config.pointRadius;this.canvas.addShape("circle",{zIndex:5,attrs:{x:e,y:t,r:n,stroke:a,fill:a}}),this.canvas.draw()}},{key:"addLine",value:function(e,t,a,n){var i=this.config.lineFillColor,o=this.config.lineWidth;this.canvas.addShape("line",{zIndex:5,attrs:{x1:e,y1:t,x2:a,y2:n,fill:i,stroke:i,lineJoin:"round",lineWidth:o}}),this.canvas.draw()}},{key:"addPolygon",value:function(e){var t=this.config.polygonFillColor,a=this.config.lineWidth;this.canvas.addShape("polygon",{zIndex:5,attrs:{points:e,fill:t,stroke:t,lineWidth:a}}),this.canvas.draw()}},{key:"setDrawType",value:function(e){this.config.drawType=e,this.config.isCanDraw=!0}},{key:"clean",value:function(){console.log("\u753b\u5e03\u6e05\u9664"),this.canvas.clear()}},{key:"bindEvt",value:function(){var e=this.canvas;e.on("mousedown",this.CanvasMousedown.bind(this)),e.on("mousemove",this.canvasMouseMove.bind(this))}},{key:"CanvasMousedown",value:function(e){var t=this.config.isCanDraw,a=this.config.drawType;if(t){var n=e.event.button,i=e.x,o=e.y;0===n&&(console.log("\u9f20\u6807\u5de6\u952e"),this.canvasLeftClick(i,o,a)),2===n&&(console.log("\u9f20\u6807\u53f3\u952e"),this.canvasRightClick(i,o,a))}}},{key:"canvasLeftClick",value:function(e,t,a){switch(console.log("canvasLeftClick",this.config.drawData),a){case"point":this.addPoint(e,t);var n=[e,t];this.storageDrawData("point",n,!0);break;case"line":this.addPoint(e,t),this.config.mouseMoveHasClick=!0,this.config.curData.push([e,t])}}},{key:"canvasRightClick",value:function(e,t,a){var n=this.config.curData,i=n.length;if(i&&1!==i||this.config.drawData.length)switch(console.log("canvasRightClick",e,t),this.config.mouseMoveHasClick=!1,a){case"point":break;case"line":this.clean(),this.initPolygon(),this.drawPath(n);for(var o=[],r=0;r<i;r++){var c=n[r],s=c[0],l=c[1];this.storageDrawData("point",[],!0);var g=n[r+1];if(g){var u=g[0],d=g[1];o.push(s,l,u,d),this.storageDrawData("line",o)}}this.config.curData=[],console.log("getData",this.config.drawData)}}},{key:"canvasMouseMove",value:function(e){var t=this.config,a=t.mouseMoveHasClick,n=t.isCanDraw,i=t.curData,o=t.drawType;if("point"!==o&&n&&a){var r=e.x,c=e.y;i.length;switch(o){case"line":this.clean(),this.initPolygon(),this.drawPath(i,r,c)}}}},{key:"storageDrawData",value:function(e,t,a){var n={type:e,data:t,isOnlyShow:a||!1};this.config.drawData.push(n)}},{key:"drawPath",value:function(e,t,a){var n=e.length,i=t?[].concat(Object(p.a)(e),[[t,a]]):Object(p.a)(e),o=i.length;if(n)for(var r=0;r<o;r++){var c=i[r],s=i[r+1],l=c[0],g=c[1];if(this.addPoint(l,g),s){var u=s[0],d=s[1];this.addLine(l,g,u,d)}}}},{key:"dispose",value:function(){this.config.rootEl.innerHTML="",this.canvas.destroy()}}]),e}(),b=(i.a.PureComponent,function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).toAbout=function(){a.props.history.push({pathname:"/about",state:{id:1}})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,"list"),i.a.createElement("button",{onClick:this.toAbout},"button to about"),i.a.createElement(c.b,{to:{pathname:"/about/78",query:{day:"Friday"}}},"link to about"))}}]),t}(i.a.PureComponent)),x=a(95);function w(e){var t=Object(n.useState)(null),a=Object(x.a)(t,2),i=a[0],o=a[1];function r(e){o(e.isOnline)}return Object(n.useEffect)(function(){return setTimeout(function(){r({isOnline:!0})},5e3),function(){setTimeout(function(){r({isOnline:!1})},3e3)}}),i}var k,I,C,T,O,E,_,j,D,S,M=function(e){var t=w();return i.a.createElement("li",{style:{color:t?"green":"black"}},function(e){var t=w();return t?t?"Online":"Offline":"...loading"}())},P=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("ul",null,i.a.createElement(M,null)))}}]),t}(i.a.PureComponent),L=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"Login")}}]),t}(i.a.PureComponent),z=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"sidebar index")}}]),t}(i.a.PureComponent),N=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,"sidebar foo"),i.a.createElement(c.b,{to:"/sidebar_demo/other_test"},"other test"))}}]),t}(i.a.PureComponent),W=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"sidebar too")}}]),t}(i.a.PureComponent),F=a(16),B=a(33),H=a(12),A=(a(48),a(6)),q=a(46),X=Object(q.a)(function(e){var t=e.todo;return i.a.createElement("li",null,i.a.createElement("input",{type:"checkbox",checked:t.finished,onChange:function(){t.finished=!t.finished}}),t.title)}),Y=Object(q.a)((I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=Object(g.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i))),Object(F.a)(a,"newTodoTitle",C,Object(B.a)(a)),Object(F.a)(a,"handleInputChange",T,Object(B.a)(a)),Object(F.a)(a,"handleFormSubmit",O,Object(B.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFormSubmit},"New Todo:",i.a.createElement("input",{type:"text",value:this.newTodoTitle,onChange:this.handleInputChange}),i.a.createElement("button",{type:"submit"},"Add")),i.a.createElement("hr",null),i.a.createElement("ul",null,this.props.store.todos.map(function(e){return i.a.createElement(X,{todo:e,key:e.id})})),"Task left: ",this.props.store.unfinishedTodoCount)}}]),t}(n.Component),C=Object(H.a)(I.prototype,"newTodoTitle",[A.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=Object(H.a)(I.prototype,"handleInputChange",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.newTodoTitle=t.target.value}}}),O=Object(H.a)(I.prototype,"handleFormSubmit",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.store.addTodo(e.newTodoTitle),e.newTodoTitle="",t.preventDefault()}}}),k=I))||k,R=(E=function e(t){Object(s.a)(this,e),this.id=Math.random(),Object(F.a)(this,"title",_,this),Object(F.a)(this,"finished",j,this),this.title=t},_=Object(H.a)(E.prototype,"title",[A.j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=Object(H.a)(E.prototype,"finished",[A.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),new(D=function(){function e(){Object(s.a)(this,e),Object(F.a)(this,"todos",S,this)}return Object(l.a)(e,[{key:"addTodo",value:function(e){var t={title:e,id:Math.random(),finished:!1};this.todos.push(t)}},{key:"unfinishedTodoCount",get:function(){return this.todos.filter(function(e){return!e.finished}).length}}]),e}(),S=Object(H.a)(D.prototype,"todos",[A.j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(H.a)(D.prototype,"unfinishedTodoCount",[A.c],Object.getOwnPropertyDescriptor(D.prototype,"unfinishedTodoCount"),D.prototype),Object(H.a)(D.prototype,"addTodo",[A.b],Object.getOwnPropertyDescriptor(D.prototype,"addTodo"),D.prototype),D)),U=[{name:"sidebarIndex",to:"",component:z,exact:!0},{name:"sidebarFoo",to:"/foo",component:N},{name:"sidebarToo",to:"/too",component:W},{name:"otherTest",to:"/other_test",component:function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"other test",i.a.createElement(Y,{store:R}))}}]),t}(i.a.PureComponent),notSubRouter:!0}],J=function(e){var t=e.match;return i.a.createElement(i.a.Fragment,null,i.a.createElement("ul",null,U.map(function(e,a){return e.notSubRouter?null:i.a.createElement("li",{key:a},i.a.createElement(c.b,{to:"".concat(t.url).concat(e.to)},e.name))})),i.a.createElement(h.d,null,U.map(function(e,a){return i.a.createElement(h.b,{exact:e.exact,key:a,path:"".concat(t.path).concat(e.to),component:e.component})})))},K=(a(50),a(9)),G=(a(109),a(110),a(25)),$=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={scale:1,maxScale:3.375,minScale:1,activeIndex:0,scaleDef:1.5},a.setScale=function(e,t){var n=a.state,i=n.scale,o=n.maxScale,r=n.minScale,c=n.scaleDef;if(a.setState({activeIndex:t}),a.props.setType("dragImg"),"enlarge"===e){if(i>=o)return;i*=c}else{if(i<=r)return;i/=c}a.setState({scale:i},function(){a.props.setScale(i)})},a.initScale=function(){a.setState({scale:1})},a.setType=function(e,t){a.setState({activeIndex:t},function(){a.props.setType(e)})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.activeIndex;return i.a.createElement("div",{className:"dataset_type_header clearfix"},i.a.createElement("span",{className:"fl"},"\u8bf7\u8c03\u8282\u6846\u7684\u5927\u5c0f\u548c\u4f4d\u7f6e\u786e\u5b9a\u6807\u6ce8\u533a\u57df\uff0c\u5e76\u5728\u53f3\u4fa7\u6dfb\u52a0\u6216\u9009\u62e9\u6807\u7b7e\u3002"),i.a.createElement("span",{className:"fr"},i.a.createElement(G.a,{className:0===t?"active":"",key:0,type:"edit",onClick:function(){e.setType("paint",0)}}),i.a.createElement(G.a,{className:1===t?"active":"",key:1,type:"drag",onClick:function(){e.setType("dragImg",1)}}),i.a.createElement(G.a,{className:2===t?"active":"",key:2,type:"plus-circle",onClick:function(){e.setScale("enlarge",1)}}),i.a.createElement(G.a,{className:3===t?"active":"",key:3,type:"minus-circle",onClick:function(){e.setScale("narrow",1)}})))}}]),t}(i.a.PureComponent),Q=function(e,t,a){if(document.addEventListener)e.addEventListener(t,a,!1);else if(document.attachEvent)e.attachEvent("on"+t,a);else{var n=e["on"+t];e["on"+t]=function(){n(),a&&a()}}},V=function(e,t,a){document.removeEventListener?e.removeEventListener(t,a):document.detachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},Z=function e(t,a){if(!t&&"object"!==typeof t)throw new Error("error arguments","shallowClone");for(var n in a=a||(t.constructor===Array?[]:{}),t)t.hasOwnProperty(n)&&(t[n]&&"object"===typeof t[n]?(a[n]=t[n].constructor===Array?[]:{},e(t[n],a[n])):a[n]=t[n]);return a},ee=function(){function e(t){Object(s.a)(this,e),this.def={data:[],circleTagSize:8,borderWidth:1,container:".tagging_container",w:700,h:460,borderColor:"rgba(71, 118, 241, .6)",bg:"rgba(71, 118, 241, .4)",tagTitleTips:"\u8bf7\u5728\u53f3\u4fa7\u9009\u62e9\u6216\u6dfb\u52a0\u65b0\u6807\u7b7e",img:"",drawEndCallback:function(e,t,a){console.log("draw end",e,t,a)},imgOnload:function(e,t,a,n){console.log("\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210",e,t,a,n)}},this.config=Object.assign({},this.def,t),this.data={isEnterWrapper:!1,maxWidth:0,maxHeight:0,isCanDraw:!1,tagIndex:0,tagIndexObj:{},clickPos:{x:0,y:0},mouseIsEnterDrawedTag:!1,drawedTagIsCanDrag:!1,tagClickPos:{x:0,y:0,top:0,left:0},selectTagIndex:0,tagIsCanScale:!1,circleClickPos:{x:0,y:0,xmin:0,ymin:0,xmax:0,ymax:0,funcKey:""},circleDragFuncObj:{circle_tag1:"topLeft",circle_tag2:"topCenter",circle_tag3:"topRight",circle_tag4:"rightCenter",circle_tag5:"rightBottom",circle_tag6:"bottomCenter",circle_tag7:"bottomLeft",circle_tag8:"leftCenter"},isMouseClickInWrapper:!1,scale:1,lastScale:1,type:"paint",bgImgIsCanDrag:!1,scaleMultiple:1.5},this.init()}return Object(l.a)(e,[{key:"init",value:function(){this.config.img&&(this.initContainerStyle(),this.createBgImg(),this.loadStyle(),this.bindEvt())}},{key:"initContainerStyle",value:function(){this.config.container=document.querySelector(this.config.container);var e=this.config,t=e.container,a=e.w,n=e.h;t.style.width=a+"px",t.style.height=n+"px",t.style.position="relative",t.style.overflow="hidden"}},{key:"createBgImg",value:function(){var e=this,t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("img"),i=this.config.w/this.config.h,o=0,r=0;t.className="tagging_main",a.className="tagging_wrapper",this.config.wrapper=a,this.config.main=t,n.className="tagging_bg_img",n.src=this.config.img,this.config.bgImg=n,n.onload=function(){var c=n.width,s=n.height,l=c/s;l>=i?(o=e.config.w,r=o*(s/c)):(r=e.config.h,o=r*l),o=parseFloat(o),r=parseFloat(r),e.data.maxWidth=o,e.data.maxHeight=r,n.style.width=o+"px",n.style.height=r+"px",n.style.position="absolute";var g=(e.config.w-o)/2,u=(e.config.h-r)/2;n.style.top=u+"px",n.style.left=g+"px",t.style.width=o+"px",t.style.height=r+"px",t.style.position="absolute",t.style.top=u+"px",t.style.left=g+"px",a.style.width="100%",a.style.height="100%",a.style.position="relative",e.config.imgOnload(c,s,o,r),e.config.currentImgWidth=o,e.config.currentImgHeight=r,e.config.imgW=c,e.config.imgH=s,e.config.bgImgStartX=g/o,e.config.bgImgStartY=u/r,e.initTags(c,s,o,r)},t.appendChild(a),this.config.container.appendChild(n),this.config.container.appendChild(t)}},{key:"bindEvt",value:function(){var e=this.config.wrapper;this.config.container;Q(e,"mouseover",this.wrapperMouseOver.bind(this)),Q(e,"mouseleave",this.wrapperMouseLeave.bind(this)),Q(e,"mousedown",this.wrapperMouseDown.bind(this)),Q(e,"mouseup",this.wrapperMouseUp.bind(this)),Q(e,"mousemove",this.wrapperMouseMove.bind(this)),Q(document,"mouseup",this.documentMouseUp.bind(this))}},{key:"setScale",value:function(e){this.data.scale=e;var t=this.config,a=t.currentImgWidth,n=t.currentImgHeight;if(a&&n){var i=this.data.scale/this.data.lastScale,o=a*i,r=n*i;this.setBgImgSize(o,r),this.setBgImgMainPos(o,r,i),this.data.lastScale=this.data.scale}}},{key:"setType",value:function(e){this.data.type=e;var t=this.config.wrapper;"dragImg"===e?(t.classList.remove("paint"),t.classList.add("dragImg")):(t.classList.remove("dragImg"),t.classList.add("paint"))}},{key:"documentMouseUp",value:function(){this.data.isMouseClickInWrapper=!1}},{key:"wrapperMouseOver",value:function(e){var t=e.target,a=t.className;t===this.config.wrapper&&(this.data.isEnterWrapper=!0,this.data.mouseIsEnterDrawedTag&&(this.data.mouseIsEnterDrawedTag=!1)),a.indexOf("tag_draw_end")>-1&&this.mouseEnterDrawedTag()}},{key:"wrapperMouseLeave",value:function(){"dragImg"!==this.data.type?(this.data.isEnterWrapper=!1,this.data.isCanDraw=!1,this.tagDrawEnd()):this.data.bgImgIsCanDrag=!1}},{key:"wrapperMouseDown",value:function(e){var t=e.target,a=t.className;this.data.isMouseClickInWrapper=!0;var n=e.pageX,i=e.pageY,o=e.offsetX,r=e.offsetY;if(this.data.clickPos={pageX:n,pageY:i,startX:o,startY:r},"dragImg"===this.data.type){if(1===this.data.scale)return;this.data.bgImgIsCanDrag=!0;var c=this.config.bgImg,s=parseFloat(c.style.top),l=parseFloat(c.style.left);return this.data.clickPos.bmImgTop=s,void(this.data.clickPos.bmImgLeft=l)}t===this.config.wrapper&&(console.log("draw tag"),this.data.isCanDraw=!0,this.data.tagIndex++),a.indexOf("tag_draw_end")>-1&&this.drawedTagMouseDown(e),a.indexOf("circle_tag")>-1&&(console.log("tag circle click"),this.tagCircleMouseDown(e)),a.indexOf("tag_title_delete")>-1&&(console.log("tag remove"),this.removeBtnClick(e))}},{key:"wrapperMouseUp",value:function(e){"dragImg"!==this.data.type?(this.data.isCanDraw=!1,this.tagDrawEnd()):this.data.bgImgIsCanDrag=!1}},{key:"wrapperMouseMove",value:function(e){"dragImg"!==this.data.type?(this.mouseMoveDragTag(e),this.tagCircleMouseMove(e),!this.data.isCanDraw||this.data.mouseIsEnterDrawedTag||this.data.drawedTagIsCanDrag||this.drawTagging(e)):this.bgImgDrag(e)}},{key:"bgImgDrag",value:function(e){if(this.data.bgImgIsCanDrag){var t=this.data.clickPos,a=t.pageX,n=t.pageY,i=t.bmImgTop,o=t.bmImgLeft,r=e.pageX-a+o,c=e.pageY-n+i,s=this.config,l=s.currentImgWidth,g=s.currentImgHeight,u=s.w,d=s.h,h=u-l,m=d-g;r=r>0?0:r<h?h:r,c=c>0?0:c<m?m:c,l<u&&(r=o),g<d&&(c=i),this.setBgImgMainPosStyle(c,r)}}},{key:"drawTagging",value:function(e){var t=this.data.clickPos,a=t.pageX,n=t.pageY,i=t.startX,o=t.startY,r=e.pageX-a,c=e.pageY-n,s=this.getCurrentTag();s=s||this.addTagDom({});var l={xmin:0,ymin:0,xmax:0,ymax:0};r>0&&c>0?l={xmin:i,ymin:o,xmax:i+r,ymax:o+c}:r>0&&c<0?l={xmin:i,ymin:o+c,xmax:i+r,ymax:o}:r<0&&c<0?l={xmin:i+r,ymin:o+c,xmax:i,ymax:o}:r<0&&c>0&&(l={xmin:i+r,ymin:o,xmax:i,ymax:o+c}),r=Math.abs(r),c=Math.abs(c);var g=this.config.circleTagSize/2;l.xmin=l.xmin<g?g:l.xmin,l.ymin=l.ymin<g?g:l.ymin,l.ymax-=g,l.xmax-=g,r=l.xmax-l.xmin-this.config.borderWidth,c=l.ymax-l.ymin-this.config.borderWidth,this.storageCurTagData(this.data.tagIndex,l.ymin,l.xmin,r,c);var u=this.getPercentNum(r,c);this.setTagSize(s,u.left,u.top);var d=this.getPercentNum(l.xmin,l.ymin),h=d.left,m=d.top;this.setTagPos(s,m,h),this.setTagBgBorder(s)}},{key:"storageCurTagData",value:function(e,t,a,n,i){var o=this.config,r=o.currentImgWidth,c=o.currentImgHeight,s={xmin:a/=r,ymin:t/=c,xmax:a+(n/=r),ymax:t+(i/=c)};e&&(s.tagIndexId=e),this.data.tagIndexObj[e]=s}},{key:"addTagDom",value:function(e){if(!this.data.tagIndexObj[this.data.tagIndex]){var t=document.createElement("div"),a="tag tag"+this.data.tagIndex;return t.className=a,t.setAttribute("tag_index",this.data.tagIndex),this.config.wrapper.appendChild(t),this.data.tagIndexObj[this.data.tagIndex]=e,t}}},{key:"tagDrawEnd",value:function(){this.data.mouseIsEnterDrawedTag=!1,this.data.drawedTagIsCanDrag=!1,this.data.tagIsCanScale=!1;var e=this.getCurrentTag();if(e){if(!this.drawSizeTooMinCancel(e))return;this.addCircleTitle(e),this.currentTagDrawEndAddClass(e)}if((this.getCurrentTag()||this.getCurrentTag(this.data.selectTagIndex))&&this.data.isMouseClickInWrapper){var t=this.data.tagIndexObj[this.data.selectTagIndex]||{};this.data.isMouseClickInWrapper=!1,Object.keys(t).length&&(this.config.drawEndCallback(Z(t),this.config.imgW,this.config.imgH),console.log("tag draw end",this.data.selectTagIndex,t))}}},{key:"setTagPos",value:function(e,t,a){e.style.top=100*t+"%",e.style.left=100*a+"%"}},{key:"setTagSize",value:function(e,t,a){e.style.width=100*t+"%",e.style.height=100*a+"%"}},{key:"getPercentNum",value:function(e,t){var a=this.config;return{left:e/a.currentImgWidth,top:t/a.currentImgHeight}}},{key:"setBgImgSize",value:function(e,t){var a=this.config,n=a.main,i=a.bgImg;i.style.width=e+"px",i.style.height=t+"px",n.style.width=e+"px",n.style.height=t+"px",this.config.lastCurrentImgWidth=this.config.currentImgWidth,this.config.lastCurrentImgHeight=this.config.currentImgHeight,this.config.currentImgWidth=e,this.config.currentImgHeight=t}},{key:"setBgImgMainPos",value:function(){var e={x:this.config.w/2,y:this.config.h/2},t=this.data.scale/this.data.lastScale,a=this.scaleCalculationImgPos(e,t),n=a.top,i=a.left;this.setBgImgMainPosStyle(n,i)}},{key:"setBgImgMainPosStyle",value:function(e,t){var a=this.config,n=a.main,i=a.bgImg;i.style.top=e+"px",i.style.left=t+"px",n.style.top=e+"px",n.style.left=t+"px"}},{key:"scaleCalculationImgPos",value:function(e,t){var a=e.x,n=e.y,i=this.config.main,o=parseFloat(i.style.top),r=a-(a-parseFloat(i.style.left))*t,c=n-(n-o)*t,s=this.config,l=s.currentImgWidth,g=s.currentImgHeight,u=s.w,d=s.h;if(t<1){var h=u-l,m=d-g;r=r>0?0:r<h?h:r,c=c>0?0:c<m?m:c,l<u&&(r=(u-l)/2),g<d&&(c=(d-g)/2)}return{top:c,left:r}}},{key:"bgImgNarrow",value:function(e,t,a){}},{key:"mathLog",value:function(e,t){var a=Math.log(e),n=Math.log(t);return Math.floor(a/n)}},{key:"setTagBgBorder",value:function(e,t){var a=t?"rgba(".concat(t,", .6)"):this.config.borderColor,n=t?"rgba(".concat(t,", .4)"):this.config.bg;e.style.border=a,e.style.background=n}},{key:"setTagColor",value:function(e,t,a){this.config.borderColor=t,this.config.bg=a,this.setTagBgBorder(e)}},{key:"currentTagDrawEndAddClass",value:function(e){-1===e.className.indexOf("tag_draw_end")&&e.classList.add("tag_draw_end")}},{key:"drawSizeTooMinCancel",value:function(e){var t=this.config.circleTagSize,a=this.data.tagIndexObj[this.data.tagIndex],n=a.xmin,i=a.xmax,o=a.ymin,r=a.ymax,c=this.config,s=c.currentImgWidth,l=c.currentImgHieght;return!(i-n<t/s||r-o<t/l)||(console.log("\u5c0f\u4e8e\u5fc5\u987b\u5c3a\u5bf8"),e.parentNode.removeChild(e),this.data.tagIndexObj[this.data.tagIndex]=null,this.data.tagIndex--,!1)}},{key:"getCurrentTag",value:function(e){var t=".tag"+(e=e||this.data.tagIndex);return this.config.wrapper.querySelector(t)}},{key:"loadStyle",value:function(){var e=document.querySelector(".tag_style");e||((e=document.createElement("style")).className="tag_style");var t=this.config.circleTagSize,a=t/2,n="\n      .circle_tag {\n        width: ".concat(t,"px;\n        height: ").concat(t,"px;\n        border-radius: 100%;\n        background: #fff;\n        position: absolute;\n        display: none;\n      }\n      .circle_tag1 {\n        top: 0;\n        left: 0;\n        margin-left: -").concat(a,"px;\n        margin-top: -").concat(a,"px;\n      }\n      .circle_tag1:hover {\n        cursor: nw-resize;\n      }\n      .circle_tag2 {\n        top: 0;\n        left: 50%;\n        margin-left: -").concat(a,"px;\n        margin-top: -").concat(a,"px;\n      }\n      .circle_tag2:hover {\n        cursor: n-resize;\n      }\n      .circle_tag3 {\n        top: 0;\n        right: 0;\n        margin-right: -").concat(a,"px;\n        margin-top: -").concat(a,"px;\n      }\n      .circle_tag3:hover {\n        cursor: ne-resize;\n      }\n      .circle_tag4 {\n        top: 50%;\n        right: 0;\n        margin-right: -").concat(a,"px;\n        margin-top: -").concat(a,"px;\n      }\n      .circle_tag4:hover {\n        cursor: e-resize;\n      }\n      .circle_tag5 {\n        bottom: 0;\n        right: 0;\n        margin-right: -").concat(a,"px;\n        margin-bottom: -").concat(a,"px;\n      }\n      .circle_tag5:hover {\n        cursor: se-resize;\n      }\n      .circle_tag6 {\n        bottom: 0;\n        right: 50%;\n        margin-right: -").concat(a,"px;\n        margin-bottom: -").concat(a,"px;\n      }\n      .circle_tag6:hover {\n        cursor: s-resize;\n      }\n      .circle_tag7 {\n        bottom: 0;\n        left: 0;\n        margin-left: -").concat(a,"px;\n        margin-bottom: -").concat(a,"px;\n      }\n      .circle_tag7:hover {\n        cursor: sw-resize;\n      }\n      .circle_tag8 {\n        top: 50%;\n        left: 0;\n        margin-left: -").concat(a,"px;\n        margin-top: -").concat(a,"px;\n      }\n      .circle_tag8:hover {\n        cursor: w-resize;\n      }\n      .tagging_wrapper {\n        overflow: hidden;\n      }\n      .dragImg.tagging_wrapper:hover {\n        cursor: grab;\n      }\n      .tagging_wrapper .tag.active .circle_tag{\n        display: block;\n      }\n      .tagging_wrapper.dragImg .tag.active .circle_tag{\n        display: none;\n      }\n      .tagging_wrapper.paint .tag.active .circle_tag{\n        display: block;\n      }\n      .tagging_wrapper .tag:hover {\n        cursor: move;\n      }\n      .tagging_wrapper.dragImg .tag:hover {\n        cursor: grab;\n      }\n      .tagging_bg_img{\n        display: block;\n        user-select: none;\n      }\n      .tag_title_container {\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        white-space: nowrap;\n        display: none;\n      }\n      .tag_title_wrapper {\n        padding: 0 10px;\n        box-sizing: border-box;\n        height: 30px;\n        line-height: 30px;\n        background-color: hsla(0,0%,100%,.6);\n        font-size: 12px;\n        color: #333;\n      }\n      .tag_title_delete {\n        cursor: pointer;\n      }\n      .tagging_wrapper .tag.active .tag_title_container {\n        display: block;\n      }\n      .tagging_wrapper.dragImg .tag.active .tag_title_container{\n        display: none;\n      }\n      .tagging_wrapper.dragImg .tag.active {\n        border: 1px solid red !important;\n      }\n      .tagging_wrapper.paint .tag.active .tag_title_container{\n        display: block;\n      }\n      .tagging_wrapper .tag {\n        position: absolute;\n      }\n      .tagging_wrapper:hover {\n        cursor: crosshair;\n      }\n    ");e.innerHTML=n,document.querySelector("head").appendChild(e)}},{key:"addCircleTitle",value:function(e,t,a){var n=this.data.tagIndexObj[this.data.tagIndex];if(!n||!n.hasCircleTagTitle){for(var i="",o=0;o<8;o++)i+='<span class="circle_tag circle_tag'+(o+1)+'" func="circle_tag'+(o+1)+'"></span>';if(i+='\n        <div class="tag_title_container">\n          <div class="tag_title_wrapper">\n            <span class="tag_title_delete" tag_index='.concat(this.data.tagIndex,">\n              ").concat("\u5220\u9664",'\n            </span>\n            <span class="tag_title_text">').concat(a||this.config.tagTitleTips,"</span>\n          </div>\n        </div>\n      "),e.innerHTML=i,n.hasCircleTagTitle=!0,!t){this.currentTagShowCircle();var r=this.config.wrapper.querySelector(".tag.active");this.data.selectTagIndex=r.getAttribute("tag_index")}}}},{key:"removeBtnClick",value:function(e){var t=e.target.getAttribute("tag_index");this.removeTag(t)}},{key:"removeTag",value:function(e){var t=this.getCurrentTag(e);t.parentNode.removeChild(t),this.data.tagIndexObj[e]=null,this.data.selectTagIndex=0,console.log("remove tagIndex",e,this.data.drawedTagIsCanDrag)}},{key:"currentTagShowCircle",value:function(e){var t=this.config.wrapper.querySelector(".tag.active"),a=this.getCurrentTag(e);t&&t.classList.remove("active"),a&&a.classList.add("active")}},{key:"mouseEnterDrawedTag",value:function(){this.data.isCanDraw||(this.data.mouseIsEnterDrawedTag=!0)}},{key:"mouseLeaveDrawedTag",value:function(){this.data.mouseIsEnterDrawedTag=!1}},{key:"drawedTagMouseDown",value:function(e){this.data.drawedTagIsCanDrag=!0;var t=e.target.getAttribute("tag_index");this.data.selectTagIndex=t,console.log("tag click",t);var a=e.pageX,n=e.pageY,i=this.data.tagIndexObj[t],o=i.xmin,r=i.ymin,c=i.xmax,s=i.ymax;this.data.tagClickPos={x:a,y:n,xmin:o,ymin:r,xmax:c,ymax:s},this.currentTagShowCircle(t)}},{key:"drawedTagMouseUp",value:function(){this.data.drawedTagIsCanDrag=!1}},{key:"mouseMoveDragTag",value:function(e){if(this.data.drawedTagIsCanDrag){var t=this.data.tagClickPos,a=t.x,n=t.y,i=t.xmin,o=t.ymin,r=t.xmax,c=t.ymax,s=this.getPercentNum(e.pageX-a,e.pageY-n),l=s.left,g=s.top,u=l+i,d=g+o,h=this.data.selectTagIndex,m=this.data.tagIndexObj[h];m.xmin=u,m.ymin=d,m.xmax=l+r,m.ymax=g+c;var p=this.getCurrentTag(h);this.setTagPos(p,d,u)}}},{key:"tagCircleMouseDown",value:function(e){this.data.tagIsCanScale=!0;var t=e.target,a=t.parentNode.getAttribute("tag_index");this.data.selectTagIndex=a;var n=t.getAttribute("func");n=this.data.circleDragFuncObj[n]+"MoveFunc";var i=this.data.tagIndexObj[a],o=i.xmin,r=i.ymin,c=i.xmax,s=i.ymax,l=e.pageX,g=e.pageY;this.data.circleClickPos={x:l,y:g,funcKey:n,xmin:o,ymin:r,xmax:c,ymax:s}}},{key:"tagCircleMouseUp",value:function(e){this.data.tagIsCanScale=!1}},{key:"tagCircleMouseMove",value:function(e){if(this.data.tagIsCanScale){var t=this.data.circleClickPos,a=t.x,n=t.y,i=t.funcKey,o=t.xmin,r=t.ymin,c=t.xmax,s=t.ymax,l=e.pageX-a,g=e.pageY-n;this.tagChageSize(l,g,i,o,r,c,s)}}},{key:"tagChageSize",value:function(e,t,a,n,i,o,r){var c=this.config.circleTagSize,s=this.data.selectTagIndex,l=this.data.tagIndexObj[s],g=this.getCurrentTag(s),u=this.getPercentNum(e,t),d=u.top,h=u.left,m=c/this.config.currentImgWidth,p=c/this.config.currentImgHeight;switch(a){case"topLeftMoveFunc":o-(n+=h)<m&&(n=o-m),r-(i+=d)<=p&&(i=r-p),l.xmin=n,l.ymin=i;break;case"topCenterMoveFunc":r-(i+=d)<p&&(i=r-p),l.ymin=i;break;case"topRightMoveFunc":(o+=h)-n<=m&&(o=n+m),r-(i+=d)<p&&(i=r-p),l.ymin=i,l.xmax=o;break;case"rightCenterMoveFunc":(o+=h)-n<=m&&(o=n+m),l.xmax=o;break;case"rightBottomMoveFunc":(o+=h)-n<=m&&(o=n+m),(r+=d)-i<p&&(r=i+p),l.xmax=o,l.ymax=r;break;case"bottomCenterMoveFunc":(r+=d)-i<p&&(r=i+p),l.ymax=r;break;case"bottomLeftMoveFunc":o-(n+=h)<=m&&(n=o-m),(r+=d)-i<p&&(r=i+p),l.xmin=n,l.ymax=r;break;case"leftCenterMoveFunc":o-(n+=h)<=m&&(n=o-m),l.xmin=n}var f=o-n,v=r-i;this.setTagPos(g,i,n),this.setTagSize(g,f,v)}},{key:"getTagData",value:function(){for(var e=this.data.tagIndexObj,t=Object.keys(e),a=[],n=t.length,i=0;i<n;i++){var o=e[t[i]];if(o){var r=o.tag_name,c=o.tagIndexId,s=o.xmin,l=o.ymin,g=o.xmax,u=o.ymax;a.push({xmin:s,ymin:l,xmax:g,ymax:u,tag_name:r,tagIndexId:c})}}return console.log("get data",a),a}},{key:"getImgInfo",value:function(){return{render_width:this.config.currentImgWidth,render_height:this.config.currentImgHeight,imgW:this.config.imgW,imgH:this.config.imgH}}},{key:"setTagTitle",value:function(e,t,a){var n=this.data.selectTagIndex;if(n){var i=this.getCurrentTag(n);i.querySelector(".tag_title_text").innerHTML=e,this.setTagBgBorder(i,t),this.data.tagIndexObj[n].tag_name=e,this.data.tagIndexObj[n].tag_id=a}}},{key:"initTags",value:function(){console.log("init tags");var e=this.config.data;this.addTags(e)}},{key:"addTags",value:function(e){var t=this;e.length&&e.forEach(function(e){var a=e.tagIndexId;t.data.tagIndex=a||t.data.tagIndex+1,t.addTagDom(e);var n=t.getCurrentTag();n.classList.add("tag_draw_end");var i=e.xmin,o=e.ymin,r=e.xmax,c=e.ymax,s=e.tag_name,l=e.color,g=r-i,u=c-o;e.tagIndexId=t.data.tagIndex,t.setTagSize(n,g,u,t.data.tagIndex),t.setTagBgBorder(n,l),t.setTagPos(n,o,i),t.addCircleTitle(n,!0,s),console.log("add tag draw end",e),t.config.drawEndCallback(Z(e),t.config.imgW,t.config.imgH)})}},{key:"dispose",value:function(){var e=this.config.container,t=this.config.wrapper;V(t,"mouseover",this.wrapperMouseOver),V(t,"mouseleave",this.wrapperMouseLeave),V(t,"mousedown",this.wrapperMouseDown),V(t,"mouseup",this.wrapperMouseUp),V(t,"mousemove",this.wrapperMouseMove);var a=e.querySelector(".tagging_bg_img"),n=e.querySelector(".tagging_main");n&&(n.parentNode.removeChild(a),n.parentNode.removeChild(n))}}]),e}(),te=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={img:"",type:"paint",scale:1},a.switchImg=function(){document.querySelector(".upload_img").click()},a.uploadImg=function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){var t=e.target.result;a.setState({img:t},function(){a.refs.datasetTypeHeader.initScale();var e={container:".label-warp",data:[],w:700,h:460,img:t};a.initBaiduTagging(e)})},document.querySelector(".upload_img").value=""}},a.initBaiduTagging=function(e){a.baiduTaggingDestory(),a.baiduTag=new ee(e),console.log("this.baiduTag",a.baiduTag)},a.baiduTaggingDestory=function(){a.baiduTag&&(a.baiduTag.dispose(),a.baiduTag=null)},a.setType=function(e){console.log("set type",e),a.baiduTag&&a.baiduTag.setType(e)},a.setScale=function(e){console.log("set scale",e),a.baiduTag&&a.baiduTag.setScale(e)},a.getTagData=function(){return a.baiduTag&&a.baiduTag.getTagData()||[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){var e=this.state.img;return i.a.createElement("div",{className:"container dataset_container"},i.a.createElement("div",{className:"dataset_container_main"},i.a.createElement("h1",null,"\u6570\u636e\u6807\u6ce8"),i.a.createElement(K.a,{type:"primary",onClick:this.switchImg},"\u9009\u62e9\u56fe\u7247"),e?i.a.createElement(K.a,{type:"primary",onClick:this.getTagData,style:{marginLeft:10}},"\u83b7\u53d6\u6807\u6ce8\u6570\u636e"):null,i.a.createElement("input",{onChange:this.uploadImg,className:"none upload_img",type:"file",accept:"image/*"}),e?i.a.createElement("div",{className:"dataset_container_content box_flex"},i.a.createElement("div",{className:"left"},i.a.createElement($,{ref:"datasetTypeHeader",setScale:this.setScale,setType:this.setType}),i.a.createElement("div",{className:"label-warp"})),i.a.createElement("div",{className:"right flex"})):null))}}]),t}(i.a.PureComponent),ae=a(69),ne=a.n(ae),ie=(a(156),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={points:[{type:"polygon",data:[{x:50,y:50},{x:50,y:100},{x:100,y:50},{x:100,y:100}]}],canvasDraw:null,drawType:"polygon",imgIsLoaded:!1},a.canvasDraw=null,a.initChart=function(){a.state.points;var e=new ne.a.Chart({container:"c1",width:600,height:400,forceFit:!0});e.view({});e.source([{genre:"Sports",sold:275},{genre:"Strategy",sold:115},{genre:"Action",sold:120},{genre:"Shooter",sold:350},{genre:"Other",sold:150}]),e.interval().position("genre*sold").color("genre"),e.clear(),e.polygon().position("genre*sold").color("red").size(5),e.render()},a.G2Demo=function(){var e=new ne.a.Chart({id:"c1",width:600,height:400}),t=e.view();t.source([{x:50,y:50},{x:50,y:100},{x:100,y:100},{x:100,y:50}]),t.line().position("x*y").color("red"),e.render()},a.initCanvas=function(){var e=new v.a.Canvas({containerId:"c1",width:600,height:400});e.addShape("image",{attrs:{x:0,y:0,width:600,height:400,img:"https://static2.extremevision.com.cn/images/lion/case/case_bg1_0307.png?201906131041)"}}),e.addShape("circle",{zIndex:5,attrs:{x:100,y:100,r:5,stroke:"yellow",fill:"yellow"}}),e.addShape("polygon",{zIndex:5,attrs:{points:[[50,50],[200,50],[200,150],[50,150]],fill:"rgba(129,9,39,0.5)",stroke:"red",lineJoin:"round",lineWidth:4,id:"polygon1"}}).on("click",function(e){console.log("polygon click",e)}),e.addShape("line",{zIndex:5,attrs:{x1:20,y1:20,x2:280,y2:280,fill:"pink",stroke:"pink",lineJoin:"round",lineWidth:5,lineCap:"round",id:"line1"}}).on("click",function(){console.log("line")}),e.draw(),a.canvasBindEvt(e)},a.canvasBindEvt=function(e){e.on("mousedown",function(e){var t=e.event.button;console.log("canvas mousedown",t),0===t&&console.log("\u9f20\u6807\u5de6\u952e"),2===t&&console.log("\u9f20\u6807\u53f3\u952e")})},a.initCanvasDraw=function(){a.canvasDraw=new y({w:600,h:400,imgOnLoadCb:a.imgOnLoadCb})},a.imgOnLoadCb=function(e){console.log("isLoaded",e),a.setState({imgIsLoaded:e}),!e&&a.canvasDraw&&(a.canvasDraw.dispose(),a.canvasDraw=null)},a.setDrawType=function(e){a.canvasDraw&&a.canvasDraw.setDrawType(e),a.setState({drawType:e})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.initCanvasDraw()}},{key:"render",value:function(){var e=this,t=this.state.drawType;return i.a.createElement("div",{className:"antv_container"},i.a.createElement("h3",null,"antv \u63d2\u4ef6\u5c01\u88c5"),i.a.createElement("div",{className:"header"},i.a.createElement(K.a,{type:"polygon"===t?"primary":"default",icon:"border",onClick:function(){e.setDrawType("polygon")}}),i.a.createElement(K.a,{type:"line"===t?"primary":"default",icon:"line",onClick:function(){e.setDrawType("line")}}),i.a.createElement(K.a,{type:"point"===t?"primary":"default",icon:"minus-circle",onClick:function(){e.setDrawType("point")}}),i.a.createElement(K.a,{type:"default",icon:"delete"}),i.a.createElement(K.a,{type:"link"},"\u6293\u56fe")),i.a.createElement("div",{id:"canvasDraw",style:{width:600,height:400,margin:"0 auto"}}))}}]),t}(i.a.PureComponent)),oe=(a(88),i.a.PureComponent,[{path:"/login",component:L},{path:"/",component:te,exact:!0,needLogin:!0},{path:"/list",component:b,needLogin:!0},{path:"/about",component:P,needLogin:!0},{path:"/sidebar_demo",component:J,needLogin:!0},{path:"/data_set",component:te,needLogin:!1},{path:"/antv_demo",component:ie,needLogin:!1},{path:"/polygon_line_point",component:function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"polygon_line_point"},"sdfsddf")}}]),t}(i.a.PureComponent),needLogin:!1}]),re=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"404")}}]),t}(i.a.PureComponent),ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={isLogined:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.isLogined;return console.log("isLogined",e),i.a.createElement(i.a.Fragment,null,i.a.createElement(h.d,null,oe.map(function(t,a){var n=t.path,o=t.exact,r=t.needLogin;return i.a.createElement(h.b,{path:n,key:n,exact:o,render:function(a){return r?e?i.a.createElement(t.component,a):i.a.createElement(h.a,{to:{pathname:"/login",state:{from:a.location}}}):i.a.createElement(t.component,a)}})}),i.a.createElement(h.b,{component:re})))}}]),t}(i.a.PureComponent);function se(e,t){t(window.confirm(e))}var le=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(c.a,{getUserConfirmation:se},i.a.createElement(ce,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},88:function(e,t,a){},97:function(e,t,a){e.exports=a(157)}},[[97,1,2]]]);
//# sourceMappingURL=main.0ba4003e.chunk.js.map